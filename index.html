<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>コネフラ - カラーパレット生成ツール</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-container">

    <!-- 上パネル（固定） -->
    <div class="top-panel">
      <div class="header">
        <h1>コネフラ</h1>
        <p>カラーパレット生成ツール</p>
        <div class="version-badge">v4.0</div>
      </div>

      <div class="section">
        <h3>🎨 基本色設定</h3>
        <div class="color-input-group">
          <input type="color" id="colorPicker" class="color-picker" value="#4ECDC4">
          <input type="text" id="hexInput" class="hex-input" placeholder="#4ECDC4" maxlength="7">
        </div>
        <button class="btn" onclick="setRootColor()">起点色に設定</button>
      </div>

      <div class="section">
        <h3>🌟 分岐生成</h3>
        <div class="btn-group">
          <button class="btn btn-secondary" onclick="generateBranch('analogous')" disabled>近似色</button>
          <button class="btn btn-secondary" onclick="generateBranch('complementary')" disabled>補色</button>
          <button class="btn btn-secondary" onclick="generateBranch('split')" disabled>分割補色</button>
          <button class="btn btn-secondary" onclick="generateBranch('triad')" disabled>トライアド</button>
          <button class="btn btn-secondary" onclick="generateBranch('tetrad')" disabled>テトラード</button>
          <button class="btn btn-secondary" onclick="generateBranch('tint')" disabled>明色</button>
          <button class="btn btn-secondary" onclick="generateBranch('shade')" disabled>暗色</button>
          <button class="btn btn-secondary" onclick="generateBranch('tone')" disabled>純色</button>
        </div>
      </div>

      <div class="section">
        <h3>⚙️ 設定</h3>
        <div class="slider-group">
          <label>最大深度</label>
          <div class="slider-container">
            <input type="range" id="maxDepth" class="slider" min="2" max="6" value="3">
            <span id="maxDepthValue" class="slider-value">3</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 中央（ツリー領域） -->
    <div class="tree-panel">
      <div id="canvasContainer" class="canvas-container">
        <svg id="treeSvg" class="tree-svg"></svg>
      </div>
    </div>

    <!-- 下パネル（統計・履歴・書き出し） -->
    <div class="bottom-panel">
      <div class="section">
        <h3>📊 統計</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <div id="totalNodes" class="stat-number">0</div>
            <div class="stat-label">総色数</div>
          </div>
          <div class="stat-card">
            <div id="adoptedNodes" class="stat-number">0</div>
            <div class="stat-label">採用済み</div>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>📅 履歴</h3>
        <div id="colorHistory">
          <div style="text-align: center; color: var(--text-muted); padding: 20px;">履歴がありません</div>
        </div>
        <button class="btn btn-secondary" onclick="clearHistory()">履歴クリア</button>
      </div>

      <div class="section">
        <h3>💾 パレット書き出し</h3>
        <div class="btn-group">
          <button class="btn btn-secondary" onclick="exportPalette()">画像出力</button>
          <button class="btn btn-secondary" onclick="exportCSS()">CSS出力</button>
        </div>
      </div>
    </div>

  </div>

  <div id="notification" class="notification"></div>
  <script src="script.js"></script>
</body>
</html>